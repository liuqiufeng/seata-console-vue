import{g as R,m as X,_,b as Y,e as j,d as B,u as K,f as I,a0 as U,a as t,z as P,a1 as Q,a2 as q,P as s,a3 as J,a4 as Z,Q as L,U as k,W as ee,a5 as ne,a6 as te,v as ie,a7 as ae,a8 as le,a9 as W,aa as V,A as oe,F as N,o as G,K as w,w as l,Z as re,N as c,M as de,J as A,Y as ce,G as O,ab as se}from"./index-Jf7v1f-k.js";import{s as ue}from"./request-tiSiMTRv.js";import{_ as he,a as ge,R as pe,S as me,b as fe,D as we}from"./index-BT6DZqxb.js";import{u as Se,C as be,F as $e,_ as Ie,I as ve}from"./index-gNa-dSit.js";import{D as xe}from"./index-CnoWLaT7.js";import{M as _e,a as Me,_ as ye}from"./_plugin-vue_export-helper-CoN9GgEY.js";const Ce=e=>{const{componentCls:n,sizePaddingEdgeHorizontal:a,colorSplit:r,lineWidth:d}=e;return{[n]:_(_({},Y(e)),{borderBlockStart:`${d}px solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${e.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${d}px solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${e.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${n}-with-text`]:{display:"flex",alignItems:"center",margin:`${e.dividerHorizontalWithTextGutterMargin}px 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${d}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${n}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${n}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${n}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${d}px 0 0`},[`&-horizontal${n}-with-text${n}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${n}-dashed`]:{borderInlineStartWidth:d,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${n}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${n}-with-text-left${n}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${n}-inner-text`]:{paddingInlineStart:a}},[`&-horizontal${n}-with-text-right${n}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${n}-inner-text`]:{paddingInlineEnd:a}}})}},Pe=R("Divider",e=>{const n=X(e,{dividerVerticalGutterMargin:e.marginXS,dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG});return[Ce(n)]},{sizePaddingEdgeHorizontal:0}),ze=()=>({prefixCls:String,type:{type:String,default:"horizontal"},dashed:{type:Boolean,default:!1},orientation:{type:String,default:"center"},plain:{type:Boolean,default:!1},orientationMargin:[String,Number]}),Te=B({name:"ADivider",inheritAttrs:!1,compatConfig:{MODE:3},props:ze(),setup(e,n){let{slots:a,attrs:r}=n;const{prefixCls:d,direction:h}=K("divider",e),[S,i]=Pe(d),b=I(()=>e.orientation==="left"&&e.orientationMargin!=null),v=I(()=>e.orientation==="right"&&e.orientationMargin!=null),f=I(()=>{const{type:p,dashed:$,plain:y}=e,m=d.value;return{[m]:!0,[i.value]:!!i.value,[`${m}-${p}`]:!0,[`${m}-dashed`]:!!$,[`${m}-plain`]:!!y,[`${m}-rtl`]:h.value==="rtl",[`${m}-no-default-orientation-margin-left`]:b.value,[`${m}-no-default-orientation-margin-right`]:v.value}}),u=I(()=>{const p=typeof e.orientationMargin=="number"?`${e.orientationMargin}px`:e.orientationMargin;return _(_({},b.value&&{marginLeft:p}),v.value&&{marginRight:p})}),g=I(()=>e.orientation.length>0?"-"+e.orientation:e.orientation);return()=>{var p;const $=U((p=a.default)===null||p===void 0?void 0:p.call(a));return S(t("div",P(P({},r),{},{class:[f.value,$.length?`${d.value}-with-text ${d.value}-with-text${g.value}`:"",r.class],role:"separator"}),[$.length?t("span",{class:`${d.value}-inner-text`,style:u.value},[$]):null]))}}}),He=j(Te),De=e=>{const{componentCls:n}=e,a=`${n}-inner`;return{[n]:{[`&${n}-small`]:{minWidth:e.switchMinWidthSM,height:e.switchHeightSM,lineHeight:`${e.switchHeightSM}px`,[`${n}-inner`]:{paddingInlineStart:e.switchInnerMarginMaxSM,paddingInlineEnd:e.switchInnerMarginMinSM,[`${a}-checked`]:{marginInlineStart:`calc(-100% + ${e.switchPinSizeSM+e.switchPadding*2}px - ${e.switchInnerMarginMaxSM*2}px)`,marginInlineEnd:`calc(100% - ${e.switchPinSizeSM+e.switchPadding*2}px + ${e.switchInnerMarginMaxSM*2}px)`},[`${a}-unchecked`]:{marginTop:-e.switchHeightSM,marginInlineStart:0,marginInlineEnd:0}},[`${n}-handle`]:{width:e.switchPinSizeSM,height:e.switchPinSizeSM},[`${n}-loading-icon`]:{top:(e.switchPinSizeSM-e.switchLoadingIconSize)/2,fontSize:e.switchLoadingIconSize},[`&${n}-checked`]:{[`${n}-inner`]:{paddingInlineStart:e.switchInnerMarginMinSM,paddingInlineEnd:e.switchInnerMarginMaxSM,[`${a}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${a}-unchecked`]:{marginInlineStart:`calc(100% - ${e.switchPinSizeSM+e.switchPadding*2}px + ${e.switchInnerMarginMaxSM*2}px)`,marginInlineEnd:`calc(-100% + ${e.switchPinSizeSM+e.switchPadding*2}px - ${e.switchInnerMarginMaxSM*2}px)`}},[`${n}-handle`]:{insetInlineStart:`calc(100% - ${e.switchPinSizeSM+e.switchPadding}px)`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${a}`]:{[`${a}-unchecked`]:{marginInlineStart:e.marginXXS/2,marginInlineEnd:-e.marginXXS/2}},[`&${n}-checked ${a}`]:{[`${a}-checked`]:{marginInlineStart:-e.marginXXS/2,marginInlineEnd:e.marginXXS/2}}}}}}},Ee=e=>{const{componentCls:n}=e;return{[n]:{[`${n}-loading-icon${e.iconCls}`]:{position:"relative",top:(e.switchPinSize-e.fontSize)/2,color:e.switchLoadingIconColor,verticalAlign:"top"},[`&${n}-checked ${n}-loading-icon`]:{color:e.switchColor}}}},Be=e=>{const{componentCls:n}=e,a=`${n}-handle`;return{[n]:{[a]:{position:"absolute",top:e.switchPadding,insetInlineStart:e.switchPadding,width:e.switchPinSize,height:e.switchPinSize,transition:`all ${e.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:e.colorWhite,borderRadius:e.switchPinSize/2,boxShadow:e.switchHandleShadow,transition:`all ${e.switchDuration} ease-in-out`,content:'""'}},[`&${n}-checked ${a}`]:{insetInlineStart:`calc(100% - ${e.switchPinSize+e.switchPadding}px)`},[`&:not(${n}-disabled):active`]:{[`${a}::before`]:{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0},[`&${n}-checked ${a}::before`]:{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}}}}},Fe=e=>{const{componentCls:n}=e,a=`${n}-inner`;return{[n]:{[a]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:e.switchInnerMarginMax,paddingInlineEnd:e.switchInnerMarginMin,transition:`padding-inline-start ${e.switchDuration} ease-in-out, padding-inline-end ${e.switchDuration} ease-in-out`,[`${a}-checked, ${a}-unchecked`]:{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:`margin-inline-start ${e.switchDuration} ease-in-out, margin-inline-end ${e.switchDuration} ease-in-out`,pointerEvents:"none"},[`${a}-checked`]:{marginInlineStart:`calc(-100% + ${e.switchPinSize+e.switchPadding*2}px - ${e.switchInnerMarginMax*2}px)`,marginInlineEnd:`calc(100% - ${e.switchPinSize+e.switchPadding*2}px + ${e.switchInnerMarginMax*2}px)`},[`${a}-unchecked`]:{marginTop:-e.switchHeight,marginInlineStart:0,marginInlineEnd:0}},[`&${n}-checked ${a}`]:{paddingInlineStart:e.switchInnerMarginMin,paddingInlineEnd:e.switchInnerMarginMax,[`${a}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${a}-unchecked`]:{marginInlineStart:`calc(100% - ${e.switchPinSize+e.switchPadding*2}px + ${e.switchInnerMarginMax*2}px)`,marginInlineEnd:`calc(-100% + ${e.switchPinSize+e.switchPadding*2}px - ${e.switchInnerMarginMax*2}px)`}},[`&:not(${n}-disabled):active`]:{[`&:not(${n}-checked) ${a}`]:{[`${a}-unchecked`]:{marginInlineStart:e.switchPadding*2,marginInlineEnd:-e.switchPadding*2}},[`&${n}-checked ${a}`]:{[`${a}-checked`]:{marginInlineStart:-e.switchPadding*2,marginInlineEnd:e.switchPadding*2}}}}}},Le=e=>{const{componentCls:n}=e;return{[n]:_(_(_(_({},Y(e)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:e.switchMinWidth,height:e.switchHeight,lineHeight:`${e.switchHeight}px`,verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${e.motionDurationMid}`,userSelect:"none",[`&:hover:not(${n}-disabled)`]:{background:e.colorTextTertiary}}),q(e)),{[`&${n}-checked`]:{background:e.switchColor,[`&:hover:not(${n}-disabled)`]:{background:e.colorPrimaryHover}},[`&${n}-loading, &${n}-disabled`]:{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${n}-rtl`]:{direction:"rtl"}})}},We=R("Switch",e=>{const n=e.fontSize*e.lineHeight,a=e.controlHeight/2,r=2,d=n-r*2,h=a-r*2,S=X(e,{switchMinWidth:d*2+r*4,switchHeight:n,switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchInnerMarginMin:d/2,switchInnerMarginMax:d+r+r*2,switchPadding:r,switchPinSize:d,switchBg:e.colorBgContainer,switchMinWidthSM:h*2+r*2,switchHeightSM:a,switchInnerMarginMinSM:h/2,switchInnerMarginMaxSM:h+r+r*2,switchPinSizeSM:h,switchHandleShadow:`0 2px 4px 0 ${new Q("#00230b").setAlpha(.2).toRgbString()}`,switchLoadingIconSize:e.fontSizeIcon*.75,switchLoadingIconColor:`rgba(0, 0, 0, ${e.opacityLoading})`,switchHandleActiveInset:"-30%"});return[Le(S),Fe(S),Be(S),Ee(S),De(S)]}),Ve=ie("small","default"),Ne=()=>({id:String,prefixCls:String,size:s.oneOf(Ve),disabled:{type:Boolean,default:void 0},checkedChildren:s.any,unCheckedChildren:s.any,tabindex:s.oneOfType([s.string,s.number]),autofocus:{type:Boolean,default:void 0},loading:{type:Boolean,default:void 0},checked:s.oneOfType([s.string,s.number,s.looseBool]),checkedValue:s.oneOfType([s.string,s.number,s.looseBool]).def(!0),unCheckedValue:s.oneOfType([s.string,s.number,s.looseBool]).def(!1),onChange:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onMouseup:{type:Function},"onUpdate:checked":{type:Function},onBlur:Function,onFocus:Function}),Ge=B({compatConfig:{MODE:3},name:"ASwitch",__ANT_SWITCH:!0,inheritAttrs:!1,props:Ne(),slots:Object,setup(e,n){let{attrs:a,slots:r,expose:d,emit:h}=n;const S=Se(),i=J(),b=I(()=>{var o;return(o=e.disabled)!==null&&o!==void 0?o:i.value});Z(()=>{});const v=L(e.checked!==void 0?e.checked:a.defaultChecked),f=I(()=>v.value===e.checkedValue);k(()=>e.checked,()=>{v.value=e.checked});const{prefixCls:u,direction:g,size:p}=K("switch",e),[$,y]=We(u),m=L(),z=()=>{var o;(o=m.value)===null||o===void 0||o.focus()};d({focus:z,blur:()=>{var o;(o=m.value)===null||o===void 0||o.blur()}}),ee(()=>{ne(()=>{e.autofocus&&!b.value&&m.value.focus()})});const C=(o,x)=>{b.value||(h("update:checked",o),h("change",o,x),S.onFieldChange())},M=o=>{h("blur",o)},T=o=>{z();const x=f.value?e.unCheckedValue:e.checkedValue;C(x,o),h("click",x,o)},H=o=>{o.keyCode===V.LEFT?C(e.unCheckedValue,o):o.keyCode===V.RIGHT&&C(e.checkedValue,o),h("keydown",o)},D=o=>{var x;(x=m.value)===null||x===void 0||x.blur(),h("mouseup",o)},E=I(()=>({[`${u.value}-small`]:p.value==="small",[`${u.value}-loading`]:e.loading,[`${u.value}-checked`]:f.value,[`${u.value}-disabled`]:b.value,[u.value]:!0,[`${u.value}-rtl`]:g.value==="rtl",[y.value]:!0}));return()=>{var o;return $(t(te,null,{default:()=>[t("button",P(P(P({},ae(e,["prefixCls","checkedChildren","unCheckedChildren","checked","autofocus","checkedValue","unCheckedValue","id","onChange","onUpdate:checked"])),a),{},{id:(o=e.id)!==null&&o!==void 0?o:S.id.value,onKeydown:H,onClick:T,onBlur:M,onMouseup:D,type:"button",role:"switch","aria-checked":v.value,disabled:b.value||e.loading,class:[a.class,E.value],ref:m}),[t("div",{class:`${u.value}-handle`},[e.loading?t(le,{class:`${u.value}-loading-icon`},null):null]),t("span",{class:`${u.value}-inner`},[t("span",{class:`${u.value}-inner-checked`},[W(r,e,"checkedChildren")]),t("span",{class:`${u.value}-inner-unchecked`},[W(r,e,"unCheckedChildren")])])])]}))}}}),Ae=j(Ge),Oe={key:0},Re=B({__name:"TransactionList",setup(e){const{t:n}=oe(),a=I(()=>[{breadcrumbName:n("header.home"),path:""},{breadcrumbName:n("transactionInfo.title"),path:"transaction/list"}]),r=[{title:"xid",dataIndex:"xid",key:"xid"},{title:"transactionId",dataIndex:"transactionId",key:"transactionId"},{title:"applicationId",dataIndex:"applicationId",key:"applicationId"},{title:"transactionServiceGroup",dataIndex:"transactionServiceGroup",key:"transactionServiceGroup"},{title:"transactionName",dataIndex:"transactionName",key:"transactionName"},{title:"status",dataIndex:"status",key:"status"},{title:"timeout",dataIndex:"timeout",key:"timeout"},{title:"beginTime",dataIndex:"beginTime",key:"beginTime"},{title:"applicationData",dataIndex:"applicationData",key:"applicationData"},{title:"操作",key:"action",fixed:"right",width:300}],d=[{xid:"testxid1",transactionId:1234567890,applicationId:"app1",transactionServiceGroup:"group1",transactionName:"transaction1",status:"begin",timeout:6e3,beginTime:"2024-01-01 10:00:00",applicationData:"data1"}],h=async()=>{await ue.post("/console/globalSession/query",{})};return(S,i)=>{const b=he,v=pe,f=Ie,u=ve,g=fe,p=me,$=Ae,y=de,m=$e,z=be,F=He,C=we,M=Me,T=_e,H=xe,D=ge;return G(),N(re,null,[t(b,{title:w(n)("transactionInfo.title"),breadcrumb:{routes:a.value},"sub-title":w(n)("transactionInfo.subTitle")},null,8,["title","breadcrumb","sub-title"]),t(z,null,{default:l(()=>[t(m,{layout:"inline",style:{margin:"10px 0"},onFinish:h},{default:l(()=>[t(f,{label:w(n)("transactionInfo.createTimeLabel")},{default:l(()=>[t(v,{"show-time":!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:[w(n)("transactionInfo.selectStartTimePlaceholder"),w(n)("transactionInfo.selectEndTimePlaceholder")]},null,8,["placeholder"])]),_:1},8,["label"]),t(f,{label:"xid"},{default:l(()=>[t(u,{placeholder:w(n)("transactionInfo.inputFilterPlaceholder")},null,8,["placeholder"])]),_:1}),t(f,{label:"applicationId"},{default:l(()=>[t(u,{placeholder:w(n)("transactionInfo.inputFilterPlaceholder")},null,8,["placeholder"])]),_:1}),t(f,{label:"status"},{default:l(()=>[t(p,{"allow-clear":"",placeholder:w(n)("transactionInfo.selectFilerPlaceholder"),style:{width:"150px"}},{default:l(()=>[t(g,{value:"all"},{default:l(()=>[...i[1]||(i[1]=[c("全部",-1)])]),_:1}),t(g,{value:"begin"},{default:l(()=>[...i[2]||(i[2]=[c("开始",-1)])]),_:1}),t(g,{value:"committing"},{default:l(()=>[...i[3]||(i[3]=[c("提交中",-1)])]),_:1}),t(g,{value:"committed"},{default:l(()=>[...i[4]||(i[4]=[c("已提交",-1)])]),_:1}),t(g,{value:"rollingback"},{default:l(()=>[...i[5]||(i[5]=[c("回滚中",-1)])]),_:1}),t(g,{value:"rolledback"},{default:l(()=>[...i[6]||(i[6]=[c("已回滚",-1)])]),_:1}),t(g,{value:"timeoutrollingback"},{default:l(()=>[...i[7]||(i[7]=[c("超时回滚中",-1)])]),_:1}),t(g,{value:"timeoutrolledback"},{default:l(()=>[...i[8]||(i[8]=[c("超时已回滚",-1)])]),_:1})]),_:1},8,["placeholder"])]),_:1}),t(f,{label:"namespace"},{default:l(()=>[t(p,{placeholder:w(n)("transactionInfo.selectNamespaceFilerPlaceholder"),style:{width:"150px"}},{default:l(()=>[t(g,{value:"public"},{default:l(()=>[...i[9]||(i[9]=[c("public",-1)])]),_:1})]),_:1},8,["placeholder"])]),_:1}),t(f,{label:"cluster"},{default:l(()=>[t(p,{placeholder:w(n)("transactionInfo.selectClusterFilerPlaceholder"),style:{width:"150px"}},{default:l(()=>[t(g,{value:"default"},{default:l(()=>[...i[10]||(i[10]=[c("default",-1)])]),_:1})]),_:1},8,["placeholder"])]),_:1}),t(f,{label:"vgroup"},{default:l(()=>[t(p,{placeholder:w(n)("transactionInfo.selectVGroupFilerPlaceholder"),style:{width:"150px"}},{default:l(()=>[t(g,{value:"default"},{default:l(()=>[...i[11]||(i[11]=[c("default",-1)])]),_:1})]),_:1},8,["placeholder"])]),_:1}),t(f,{label:w(n)("transactionInfo.branchSessionSwitchLabel")},{default:l(()=>[t($)]),_:1},8,["label"]),t(f,null,{default:l(()=>[t(y,{type:"primary","html-type":"button"},{default:l(()=>[c(A(w(n)("transactionInfo.searchButtonLabel")),1)]),_:1}),t(y,{style:{"margin-left":"10px"},"html-type":"button"},{default:l(()=>[c(A(w(n)("transactionInfo.resetButtonLabel")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{columns:r,"data-source":d,scroll:{x:1300}},{bodyCell:l(({column:E,record:o})=>[E.key==="action"?(G(),N("span",Oe,[i[18]||(i[18]=O("a",null,"查看全局锁",-1)),t(F,{type:"vertical"}),t(H,null,{overlay:l(()=>[t(T,null,{default:l(()=>[t(M,null,{default:l(()=>[...i[13]||(i[13]=[c("删除全局事务",-1)])]),_:1}),t(M,null,{default:l(()=>[...i[14]||(i[14]=[c("强制删除全局事务",-1)])]),_:1}),t(M,null,{default:l(()=>[...i[15]||(i[15]=[c("停止全局事务重试",-1)])]),_:1}),t(M,null,{default:l(()=>[...i[16]||(i[16]=[c("提交或回滚全局事务",-1)])]),_:1}),t(M,null,{default:l(()=>[...i[17]||(i[17]=[c("更新全局事务状态",-1)])]),_:1})]),_:1})]),default:l(()=>[O("a",{class:"ant-dropdown-link",onClick:i[0]||(i[0]=se(()=>{},["prevent"]))},[i[12]||(i[12]=c(" 更多操作 ",-1)),t(C)])]),_:1})])):ce("",!0)]),_:1})],64)}}}),qe=ye(Re,[["__scopeId","data-v-454b2d1b"]]);export{qe as default};
